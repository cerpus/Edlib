!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e,o){var n,r,a=this;H5P.EventDispatcher.call(a),a.contentId=e,a.instanceIndex=y(),a.bookmarksMenuId="interactive-video-"+this.contentId+"-bookmarks-chooser",a.qualityMenuId="interactive-video-"+this.contentId+"-quality-chooser",a.captionsMenuId="interactive-video-"+this.contentId+"-captions-chooser",a.playbackRateMenuId="interactive-video-"+this.contentId+"-playback-rate-chooser",a.isMinimal=!1,a.options=v.extend({video:{},assets:{}},t.interactiveVideo),a.options.video.startScreenOptions=a.options.video.startScreenOptions||{},a.options.video.startScreenOptions.title||(a.options.video.startScreenOptions.title="Interactive Video"),a.startScreenOptions=v.extend({hideStartTitle:!1,shortStartDescription:""},a.options.video.startScreenOptions),t.override&&(t.override.showSolutionButton||t.override.retryButton)&&(a.override={},t.override.showSolutionButton&&(a.override.enableSolutionsButton="on"===t.override.showSolutionButton),t.override.retryButton&&(a.override.enableRetry="on"===t.override.retryButton)),void 0!==t.override&&(a.showRewind10=void 0!==t.override.showRewind10&&t.override.showRewind10,a.showBookmarksmenuOnLoad=void 0!==t.override.showBookmarksmenuOnLoad&&t.override.showBookmarksmenuOnLoad,a.preventSkipping=t.override.preventSkipping||!1,a.deactivateSound=t.override.deactivateSound||!1),a.l10n=v.extend({interaction:"Interaction",play:"Play",pause:"Pause",mute:"Mute",unmute:"Unmute",quality:"Video quality",captions:"Captions",close:"Close",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",summary:"Summary",bookmarks:"Bookmarks",defaultAdaptivitySeekLabel:"Continue",continueWithVideo:"Continue with video",more:"More",playbackRate:"Playback rate",rewind10:"Rewind 10 seconds",navDisabled:"Navigation is disabled",sndDisabled:"Sound is disabled",requiresCompletionWarning:"You need to answer all the questions correctly before continuing.",back:"Back",hours:"Hours",minutes:"Minutes",seconds:"Seconds",currentTime:"Current time:",totalTime:"Total time:",navigationHotkeyInstructions:"Use key 'k' for starting and stopping video at any time",singleInteractionAnnouncement:"Interaction appeared:",multipleInteractionsAnnouncement:"Multiple interactions appeared:",videoPausedAnnouncement:"Video was paused",content:"Content"},t.l10n),o&&void 0!==o.previousState&&void 0!==o.previousState.progress&&void 0!==o.previousState.answers&&(a.previousState=o.previousState),a.lastState=H5P.Video.ENDED,a.on("resize",function(){a.resize()}),a.justVideo=!1;var s=navigator.userAgent.match(/(iPhone|iPod) OS (\d*)_/i);if(null!==s&&3===s.length&&(a.justVideo=s[2]<10),n=a.previousState&&a.previousState.progress?Math.floor(a.previousState.progress):0,0===n&&t.override&&t.override.startVideoAt&&(n=t.override.startVideoAt),r=t.override&&!!t.override.loop,this.autoplay=t.override&&!!t.override.autoplay,a.video=H5P.newRunnable({library:"H5P.Video 1.3",params:{sources:a.options.video.files,visuals:{poster:a.options.video.startScreenOptions.poster,controls:a.justVideo,fit:!1,disableRemotePlayback:!0},startAt:n,a11y:a.options.video.textTracks}},a.contentId,void 0,void 0,{parent:a}),a.justVideo)return void a.video.on("loaded",function(){a.trigger("resize")});var l=!1;a.video.on("loaded",function(){l=!0,a.loaded()}),a.video.on("error",function(){a.removeSplash()});var c=!0;if(a.video.on("stateChange",function(e){!a.controls&&l&&(a.addControls(),a.trigger("resize"));var o=e.data;if(a.currentState!==i.SEEKING)switch(o){case H5P.Video.ENDED:if(a.currentState=H5P.Video.ENDED,a.controls.$play.addClass("h5p-pause").attr("aria-label",a.l10n.play),a.timeUpdate(a.video.getCurrentTime()),a.updateCurrentTime(a.getDuration()),a.complete(),r){a.video.play();var n=t.override&&t.override.startVideoAt?t.override.startVideoAt:0;a.video.seek(n)}break;case H5P.Video.PLAYING:c&&(a.addQualityChooser(),a.addPlaybackRateChooser(),a.removeSplash(),a.startUpdatingBufferBar(),a.toggleBookmarksChooser(!1,c),c=!1),a.currentState=H5P.Video.PLAYING,a.controls.$play.removeClass("h5p-pause").attr("aria-label",a.l10n.pause),a.controls.$play.is(":focus")&&(a.controls.$play.blur(),a.controls.$play.focus()),a.timeUpdate(a.video.getCurrentTime());break;case H5P.Video.PAUSED:a.currentState=H5P.Video.PAUSED,a.controls.$play.addClass("h5p-pause").attr("aria-label",a.l10n.play),a.focusInteraction?(a.focusInteraction.getFirstTabbableElement().focus(),delete a.focusInteraction):a.controls.$play.is(":focus")&&(a.controls.$play.blur(),a.controls.$play.focus()),a.timeUpdate(a.video.getCurrentTime());break;case H5P.Video.BUFFERING:a.currentState=H5P.Video.BUFFERING,a.removeSplash(),a.startUpdatingBufferBar()}}),a.video.on("qualityChange",function(t){var e=t.data;a.controls.$qualityChooser&&a.controls.$qualityChooser.find("li").attr("aria-checked","false").filter('[data-quality="'+e+'"]').attr("aria-checked","true")}),a.video.on("playbackRateChange",function(t){var e=t.data;a.controls&&a.controls.$playbackRateChooser&&a.controls.$playbackRateChooser.find("li").attr("aria-checked","false").filter('[playback-rate="'+e+'"]').attr("aria-checked","true")}),a.on("enterFullScreen",function(){a.hasFullScreen=!0,a.$container.parent(".h5p-content").css("height","100%"),a.controls.$fullscreen.addClass("h5p-exit").attr("aria-label",a.l10n.exitFullscreen),a.controls.$fullscreen.blur(),a.controls.$fullscreen.focus(),a.resizeInteractions()}),a.on("exitFullScreen",function(){a.$container.hasClass("h5p-standalone")&&a.$container.hasClass("h5p-minimal")&&a.pause(),a.hasFullScreen=!1,a.$container.parent(".h5p-content").css("height",""),a.controls.$fullscreen.removeClass("h5p-exit").attr("aria-label",a.l10n.fullscreen),a.controls.$fullscreen.blur(),a.controls.$fullscreen.focus(),a.resizeInteractions(),a.dnb&&a.dnb.dialog&&!a.hasUncompletedRequiredInteractions()&&a.dnb.dialog.close()}),a.video.on("captions",function(t){a.controls||(a.addControls(),a.trigger("resize")),a.setCaptionTracks(t.data)}),a.interactions=[],a.options.assets.interactions)for(var u=0;u<a.options.assets.interactions.length;u++)this.initInteraction(u);a.accessibility=new f.default(a.l10n)}Object.defineProperty(e,"__esModule",{value:!0}),e.KEY_CODE_START_PAUSE=void 0;var r=o(7),a=n(r),s=o(1),l=n(s),c=o(3),u=n(c),d=o(10),h=n(d),p=o(11),f=n(p),v=H5P.jQuery;i.prototype=Object.create(H5P.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.setCaptionTracks=function(t){var e=this;if(t.unshift(new H5P.Video.LabelValue("Off","off")),e.captionsTrackSelector)return void e.captionsTrackSelector.updateOptions(t);var o=e.video.getCaptionsTrack();o||(o=t[0]),e.captionsTrackSelector=new a.default("captions",t,o,"menuitemradio",e.l10n,e.contentId),e.captionsTrackSelector.on("select",function(t){e.video.setCaptionsTrack("off"===t.data.value?null:t.data)}),e.captionsTrackSelector.on("close",function(){"true"===e.controls.$more.attr("aria-expanded")&&e.controls.$more.click()}),e.captionsTrackSelector.on("open",function(){e.controls.$overlayButtons.addClass("h5p-hide")}),v(e.captionsTrackSelector.control).insertAfter(e.controls.$volume),v(e.captionsTrackSelector.popup).css(e.controlsCss).insertAfter(v(e.captionsTrackSelector.control)),v(e.captionsTrackSelector.overlayControl).insertAfter(e.controls.$qualityButtonMinimal),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.captionsTrackSelector.overlayControl),e.minimalMenuKeyboardControls.insertElementAt(e.captionsTrackSelector.overlayControl,2)},i.prototype.getCurrentState=function(){var t=this;if(t.video.play){for(var e={progress:t.video.getCurrentTime(),answers:[]},o=0;o<t.interactions.length;o++)e.answers[o]=t.interactions[o].getCurrentState();return e.progress?e:t.previousState&&t.previousState.progress?t.previousState:void 0}},i.prototype.removeSplash=function(){void 0!==this.$splash&&(this.$splash.remove(),delete this.$splash)},i.prototype.attach=function(t){var e=this,o=this;if(void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted(),this.$container=t,t.addClass("h5p-interactive-video").html('<div class="h5p-video-wrapper"></div><div role="toolbar" class="h5p-controls"></div>'),this.fontSize=16,this.width=640,this.interactions&&this.interactions.forEach(function(t){t.reCreate()}),this.$videoWrapper=t.children(".h5p-video-wrapper"),this.attachVideo(this.$videoWrapper),this.justVideo)return this.$videoWrapper.find("video").css("minHeight","200px"),void t.children(":not(.h5p-video-wrapper)").remove();this.$read=v("<div/>",{"aria-live":"polite",class:"hidden-but-read",appendTo:t}),this.readText=null,this.$controls=t.children(".h5p-controls").addClass("hidden"),void 0===this.editor?(this.dnb=new H5P.DragNBar([],this.$videoWrapper,this.$container,{disableEditor:!0}),this.dnb.dialog.on("open",function(){o.lastState=o.currentState,o.currentState!==H5P.Video.PAUSED&&o.currentState!==H5P.Video.ENDED&&o.video.pause()}),this.dnb.dialog.on("close",function(){o.restoreTabIndexes(),o.lastState!==H5P.Video.PAUSED&&o.lastState!==H5P.Video.ENDED&&o.video.play()})):o.on("dnbEditorReady",function(){o.dnb=o.editor.dnb,o.dnb.dialog.disableOverlay=!0}),this.video.pressToPlay||(this.currentState===i.LOADED?this.addControls():this.addSplash()),t.attr("tabindex","-1"),t.on("keyup",function(t){var n=o.controls&&o.controls.$play,i=75===t.which;if(n&&i){if("INPUT"===t.target.nodeName)return;if(e.hasUncompletedRequiredInteractions()){var r=v(document.activeElement);e.showWarningMask().find(".h5p-button-back").click(function(){return r.focus()})}else o.controls.$play.click()}}),this.$container.prepend(v(this.accessibility.getHotkeyInstructor())),this.$container.append(v(this.accessibility.getInteractionAnnouncer())),this.currentState=i.ATTACHED,this.autoplay&&o.video.play()},i.prototype.attachVideo=function(t){this.video.attach(t),this.justVideo||(this.$overlay=v('<div class="h5p-overlay h5p-ie-transparent-background"></div>').appendTo(t))},i.prototype.addSplash=function(){var t=this;void 0!==this.editor||this.video.pressToPlay||!this.video.play||this.$splash||(this.$splash=v('<div class="h5p-splash-wrapper"><div class="h5p-splash-outer"><div class="h5p-splash" role="button" tabindex="0"><div class="h5p-splash-main"><div class="h5p-splash-main-outer"><div class="h5p-splash-main-inner"><div class="h5p-splash-play-icon" aria-label="'+this.l10n.play+'"></div><div class="h5p-splash-title">'+this.options.video.startScreenOptions.title+'</div></div></div></div><div class="h5p-splash-footer"><div class="h5p-splash-footer-holder"><div class="h5p-splash-description">'+t.startScreenOptions.shortStartDescription+"</div></div></div></div></div></div>").click(function(){t.video.play()}).appendTo(this.$overlay).find(".h5p-interaction-button").click(function(){return!1}).end(),v(".h5p-splash",this.$splash).keydown(function(e){var o=e.which;32!==o&&13!==o||(t.video.play(),e.preventDefault(),t.$controls.find(".h5p-play").focus())}),void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||this.$splash.addClass("no-description"),this.startScreenOptions.hideStartTitle&&this.$splash.addClass("no-title"))},i.prototype.getDuration=function(){return void 0===this.duration&&(this.duration=this.video.getDuration()),this.duration},i.prototype.addControls=function(){var t=this,e=this;this.addSplash(),this.attachControls(this.$controls.removeClass("hidden"));var o=this.getDuration(),n=i.humanizeTime(o),r=i.formatTimeForA11y(o,e.l10n);this.controls.$totalTime.find(".human-time").html(n),this.controls.$totalTime.find(".hidden-but-read").html(e.l10n.totalTime+" "+r),this.controls.$slider.slider("option","max",o),this.bookmarkMenuKeyboardControls=new l.default([new u.default]),this.bookmarkMenuKeyboardControls.on("close",function(){return t.toggleBookmarksChooser(!1)}),this.addSliderInteractions(),this.addBookmarks(),this.trigger("controls")},i.prototype.loaded=function(){var t=this.getDuration();if(this.oneSecondInPercentage=100/t,t=Math.floor(t),void 0!==this.editor){var e=b("interactions",this.editor.field.fields),o=b("duration",e.field.fields).fields;o[0].max=o[1].max=t,o[0].min=o[1].min=0;for(var n=b("adaptivity",e.field.fields).fields,r=0;r<n.length;r++)n[r].fields&&(b("seekTo",n[r].fields).max=t)}if(this.hasMainSummary()){var a=t-this.options.summary.displayAt;a<0&&(a=0),void 0===this.options.assets.interactions&&(this.options.assets.interactions=[]),this.options.assets.interactions.push({action:this.options.summary.task,x:80,y:80,duration:{from:a,to:t},displayType:"button",bigDialog:!0,className:"h5p-summary-interaction h5p-end-summary",label:"<p>"+this.l10n.summary+"</p>",mainSummary:!0}),this.initInteraction(this.options.assets.interactions.length-1)}this.currentState===i.ATTACHED&&(this.video.pressToPlay||this.addControls(),this.trigger("resize")),this.currentState=i.LOADED},i.prototype.initInteraction=function(t){var e=this,o=e.options.assets.interactions[t];if(e.override){var n={};o.adaptivity&&o.adaptivity.requireCompletion&&(n.enableRetry=!0),H5P.jQuery.extend(o.action.params.behaviour,e.override,n)}var i;void 0!==e.previousState&&void 0!==e.previousState.answers&&null!==e.previousState.answers[t]&&(i=e.previousState.answers[t]);var r=new h.default(o,e,i);return r.on("display",function(t){var o=t.data;o.appendTo(e.$overlay),r.repositionToWrapper(e.$videoWrapper);var n=void 0!==e.video.pressToPlay;g(n?100:null,function(){(e.currentState===H5P.Video.PLAYING||e.currentState===H5P.Video.BUFFERING)&&r.pause()&&(e.focusInteraction||(e.focusInteraction=r),e.video.pause())}),e.seekingTo&&(e.seekingTo=void 0,o.focus()),setTimeout(function(){r.positionLabel(e.$videoWrapper.width())},0)}),r.on("hide",function(t){t.data}),r.on("xAPI",function(t){-1!==v.inArray(t.getVerb(),["completed","answered"])&&(t.setVerb("answered"),r.isMainSummary()&&t.isFromChild()&&setTimeout(function(){e.complete()},0)),void 0===t.data.statement.context.extensions&&(t.data.statement.context.extensions={}),t.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]="PT"+Math.floor(e.video.getCurrentTime())+"S"}),e.interactions.push(r),r},i.prototype.hasMainSummary=function(){var t=this.options.summary;return!(void 0===t||void 0===t.displayAt||void 0===t.task||void 0===t.task.params||void 0===t.task.params.summaries||!t.task.params.summaries.length||void 0===t.task.params.summaries[0].summary||!t.task.params.summaries[0].summary.length)},i.prototype.addSliderInteractions=function(){var t=this;this.controls.$interactionsContainer.children().remove(),H5P.jQuery.extend([],this.interactions).sort(function(t,e){return t.getDuration().from-e.getDuration().from}).forEach(function(e){var o=e.addDot();void 0!==o&&(o.appendTo(t.controls.$interactionsContainer),t.preventSkipping||t.interactionKeyboardControls.addElement(o.get(0)))})},i.prototype.addBookmarks=function(){if(this.bookmarksMap={},void 0!==this.options.assets.bookmarks&&!this.preventSkipping)for(var t=0;t<this.options.assets.bookmarks.length;t++)this.addBookmark(t)},i.prototype.toggleBookmarksChooser=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.controls.$bookmarksButton){t=void 0===t?!this.controls.$bookmarksChooser.hasClass("h5p-show"):t;var o=this.controls.$bookmarksChooser.hasClass("h5p-show");t?(this.controls.$more.attr("aria-expanded","true"),this.controls.$minimalOverlay.addClass("h5p-show"),this.controls.$minimalOverlay.find(".h5p-minimal-button").addClass("h5p-hide"),this.controls.$bookmarksButton.attr("aria-expanded","true"),this.controls.$bookmarksChooser.css({maxHeight:t?this.controlsCss.maxHeight:"32px"}).addClass("h5p-show"),this.controls.$bookmarksChooser.find('[tabindex="0"]').first().focus()):(this.controls.$more.attr("aria-expanded","false"),this.controls.$minimalOverlay.removeClass("h5p-show"),this.controls.$minimalOverlay.find(".h5p-minimal-button").removeClass("h5p-hide"),this.controls.$bookmarksButton.attr("aria-expanded","false"),this.controls.$bookmarksChooser.css({maxHeight:t?this.controlsCss.maxHeight:"32px"}).removeClass("h5p-show"),e||this.controls.$bookmarksButton.focus()),this.controls.$bookmarksChooser.toggleClass("h5p-transitioning",t||o)}},i.prototype.showPreventSkippingMessage=function(t){var e=this;e.preventSkippingWarningTimeout||(e.$preventSkippingMessage||(e.$preventSkippingMessage=v("<div>",{class:"h5p-prevent-skipping-message",appendTo:e.controls.$bookmarksContainer}),e.$preventSkippingMessageText=v("<div>",{class:"h5p-prevent-skipping-message-text",html:e.l10n.navDisabled,appendTo:e.$preventSkippingMessage}),e.$preventSkippingMessageTextA11y=v("<div>",{class:"hidden-but-read",html:e.l10n.navDisabled,appendTo:e.controls.$slider})),e.$preventSkippingMessage.css("left",t),setTimeout(function(){e.$preventSkippingMessage.addClass("h5p-show").attr("aria-hidden","false")},0),e.preventSkippingWarningTimeout=setTimeout(function(){e.$preventSkippingMessage.removeClass("h5p-show").attr("aria-hidden","true"),setTimeout(function(){e.preventSkippingWarningTimeout=void 0},500)},2e3))},i.prototype.onBookmarkSelect=function(t,e){var o=this;o.currentState!==H5P.Video.PLAYING&&(t.mouseover().mouseout(),setTimeout(function(){o.timeUpdate(o.video.getCurrentTime())},0)),"true"===o.controls.$more.attr("aria-expanded")&&o.$container.hasClass("h5p-minimal")?o.controls.$more.click():o.toggleBookmarksChooser(!1),o.video.play(),o.video.seek(e.time);var n=i.formatTimeForA11y(e.time,o.l10n);setTimeout(function(){return o.read(o.l10n.currentTime+" "+n)},150)},i.prototype.addBookmark=function(t,e){var o=this,n=o.options.assets.bookmarks[t];void 0===e&&(e=Math.floor(10*n.time)/10);var i=o.bookmarksMap[e]=v('<div class="h5p-bookmark" style="left:'+n.time*o.oneSecondInPercentage+'%"><div class="h5p-bookmark-label"><div class="h5p-bookmark-text">'+n.label+"</div></div></div>").appendTo(o.controls.$bookmarksContainer).data("id",t).hover(function(){void 0!==o.bookmarkTimeout&&clearTimeout(o.bookmarkTimeout),o.controls.$bookmarksContainer.children(".h5p-show").removeClass("h5p-show"),i.addClass("h5p-show")},function(){o.bookmarkTimeout=setTimeout(function(){i.removeClass("h5p-show")},2e3)});i.find(".h5p-bookmark-label").css("maxWidth",parseInt(o.controls.$slider.parent().css("marginRight"))-35),void 0===o.controls.$bookmarksList&&(o.controls.$bookmarksList=v('<ul role="menu"></ul>').insertAfter(o.controls.$bookmarksChooser.find("h3")));var r=v('<li role="menuitem" aria-describedby="'+o.bookmarksMenuId+'">'+n.label+"</li>").click(function(){return o.onBookmarkSelect(i,n)}).keydown(function(t){32!==t.which&&13!==t.which||o.onBookmarkSelect(i,n),t.stopPropagation()});o.bookmarkMenuKeyboardControls.addElement(r.get(0));var a=o.controls.$bookmarksList.children(":eq("+t+")");return 0!==a.length?r.insertBefore(a):r.appendTo(o.controls.$bookmarksList),o.on("bookmarksChanged",function(n){var a=n.data.index,s=n.data.number;a===t&&s<0?(r.remove(),delete o.bookmarksMap[e]):t>=a&&(t+=s,i.data("id",t))}),o.trigger("bookmarkAdded",{bookmark:i}),i},i.prototype.attachControls=function(t){var e=this,o=v("<div/>",{class:"h5p-controls-left",appendTo:t}),n=v("<div/>",{class:"h5p-control h5p-slider",appendTo:t}),r=v("<div/>",{class:"h5p-controls-right",appendTo:t});e.preventSkipping&&e.setDisabled(n),e.controls={},e.controls.$play=e.createButton("play","h5p-control h5p-pause",o,function(){var t=e.isDisabled(e.controls.$play);if(e.controls.$play.hasClass("h5p-pause")&&!t){var o=!screen||Math.min(screen.width,screen.height)<=e.width;!e.hasFullScreen&&o&&e.$container.hasClass("h5p-standalone")&&e.$container.hasClass("h5p-minimal")&&e.toggleFullScreen(),e.video.play()}else e.video.pause()}),e.showRewind10&&(e.controls.$rewind10=e.createButton("rewind10","h5p-control",o,function(){if(e.video.getCurrentTime()>0){var t=Math.max(e.video.getCurrentTime()-10,0);e.video.seek(t),e.currentState===H5P.Video.PAUSED&&e.timeUpdate(t),e.currentState===H5P.Video.ENDED&&e.video.play()}}));var a=function(){var t=e.$container.hasClass("h5p-minimal")&&"true"===e.controls.$more.attr("aria-expanded");return t&&e.controls.$more.click(),t},s=function(t,o){return function(){var n=e.controls[t],i=e.controls[o],r="true"===n.attr("aria-disabled"),s="true"===n.attr("aria-expanded");r||(s?(n.attr("aria-expanded","false"),i.removeClass("h5p-show"),n.focus(),a()):(n.attr("aria-expanded","true"),i.addClass("h5p-show"),i.find('[tabindex="0"]').focus()))}},c=e.options.assets.bookmarks&&e.options.assets.bookmarks.length,d=e.editor||c&&!e.preventSkipping;d&&(e.controls.$bookmarksChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-bookmarks",role:"dialog",html:'<h3 id="'+e.bookmarksMenuId+'">'+e.l10n.bookmarks+"</h3>"}),e.controls.$bookmarksChooser.append(v("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return e.toggleBookmarksChooser()},keydown:function(t){13!==t.which&&32!==t.which||(e.toggleBookmarksChooser(),t.preventDefault())}})),e.showRewind10&&e.controls.$bookmarksChooser.addClass("h5p-rewind-displacement"),e.controls.$bookmarksButton=e.createButton("bookmarks","h5p-control",o,function(){e.toggleBookmarksChooser()}),e.controls.$bookmarksButton.attr("aria-haspopup","true"),e.controls.$bookmarksButton.attr("aria-expanded","false"),e.controls.$bookmarksChooser.insertAfter(e.controls.$bookmarksButton),e.controls.$bookmarksChooser.bind("transitionend",function(){e.controls.$bookmarksChooser.removeClass("h5p-transitioning")}));var h='<time class="h5p-current">\n      <span class="hidden-but-read"></span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>',p=v('<div class="h5p-control h5p-simple-time">'+h+"</div>").appendTo(o);e.controls.$currentTimeSimple=p.find(".human-time"),e.controls.$currentTimeA11ySimple=p.find(".hidden-but-read");var f=i.formatTimeForA11y(0,e.l10n),m=v('<div class="h5p-control h5p-time">\n    '+h+'\n    <span aria-hidden="true"> / </span>\n    <time class="h5p-total">\n      <span class="hidden-but-read">'+e.l10n.totalTime+" "+f+'</span>\n      <span class="human-time" aria-hidden="true">0:00</span>\n    </time>\n  </div>').appendTo(r),b=m.find(".h5p-current");e.controls.$currentTime=b.find(".human-time"),e.controls.$currentTimeA11y=b.find(".hidden-but-read"),e.controls.$totalTime=m.find(".h5p-total"),e.updateCurrentTime(0);var g=function(){e.controls.$minimalOverlay.removeClass("h5p-show"),e.controls.$more.attr("aria-expanded","false"),e.controls.$more.focus(),e.toggleBookmarksChooser(!1),e.controls.$qualityButton&&"true"===e.controls.$qualityButton.attr("aria-expanded")&&e.controls.$qualityButton.click(),e.controls.$playbackRateButton&&"true"===e.controls.$playbackRateButton.attr("aria-expanded")&&e.controls.$playbackRateButton.click(),setTimeout(function(){e.controls.$overlayButtons.removeClass("h5p-hide")},150)};e.controls.$more=e.createButton("more","h5p-control",r,function(){"true"===e.controls.$more.attr("aria-expanded")?g():(e.controls.$minimalOverlay.addClass("h5p-show"),e.controls.$more.attr("aria-expanded","true"),e.removeSplash(),setTimeout(function(){e.controls.$minimalOverlay.find('[tabindex="0"]').focus()},150)),d?e.controls.$bookmarksChooser.add(e.controls.$qualityChooser).removeClass("h5p-show"):(e.controls.$qualityChooser.removeClass("h5p-show"),e.controls.$playbackRateChooser.removeClass("h5p-show"))}),e.controls.$playbackRateChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-playbackRate",role:"dialog",html:'<h3 id="'+e.playbackRateMenuId+'">'+e.l10n.playbackRate+"</h3>"}),e.controls.$playbackRateButton=e.createButton("playbackRate","h5p-control",r,s("$playbackRateButton","$playbackRateChooser")),e.setDisabled(e.controls.$playbackRateButton),e.controls.$playbackRateButton.attr("aria-haspopup","true"),e.controls.$playbackRateButton.attr("aria-expanded","false"),e.controls.$playbackRateChooser.insertAfter(e.controls.$playbackRateButton),function(){return-1!==navigator.userAgent.indexOf("Android")}()||function(){return-1!==navigator.userAgent.indexOf("iPad")}()||(e.controls.$volume=e.createButton("mute","h5p-control",r,function(){var t=e.controls.$volume;e.deactivateSound||(t.hasClass("h5p-muted")?(t.removeClass("h5p-muted").attr("aria-label",e.l10n.mute),e.video.unMute()):(t.addClass("h5p-muted").attr("aria-label",e.l10n.unmute),e.video.mute()),t.blur(),t.focus())}),e.deactivateSound&&(e.controls.$volume.addClass("h5p-muted").attr("aria-label",e.l10n.sndDisabled),e.setDisabled(e.controls.$volume))),e.deactivateSound&&e.video.mute(),e.controls.$qualityChooser=H5P.jQuery("<div/>",{class:"h5p-chooser h5p-quality",role:"dialog",html:'<h3 id="'+e.qualityMenuId+'">'+e.l10n.quality+"</h3>"});var y=function(){e.isMinimal?e.controls.$more.click():e.controls.$qualityButton.click()};e.controls.$qualityChooser.append(v("<span>",{role:"button",class:"h5p-chooser-close-button",tabindex:"0","aria-label":e.l10n.close,click:function(){return y()},keydown:function(t){32!==t.which&&13!==t.which||(y(),t.preventDefault())}})),e.controls.$qualityButton=e.createButton("quality","h5p-control",r,s("$qualityButton","$qualityChooser")),e.setDisabled(e.controls.$qualityButton),e.controls.$qualityButton.attr("aria-haspopup","true"),e.controls.$qualityButton.attr("aria-expanded","false"),e.controls.$qualityChooser.insertAfter(e.controls.$qualityButton),e.editor||!1===H5P.fullscreenSupported||(e.controls.$fullscreen=e.createButton("fullscreen","h5p-control",r,function(){e.toggleFullScreen()})),e.controls.$minimalOverlay=H5P.jQuery("<div/>",{class:"h5p-minimal-overlay",appendTo:e.$container});var k=H5P.jQuery("<div/>",{role:"menu",class:"h5p-minimal-wrap",appendTo:e.controls.$minimalOverlay});e.minimalMenuKeyboardControls=new l.default([new u.default]),e.minimalMenuKeyboardControls.on("close",function(){return g()}),e.controls.$overlayButtons=H5P.jQuery([]),d&&(e.controls.$bookmarkButtonMinimal=e.createButton("bookmarks","h5p-minimal-button",k,function(){e.controls.$overlayButtons.addClass("h5p-hide"),e.toggleBookmarksChooser(!0)},!0),e.controls.$bookmarkButtonMinimal.attr("role","menuitem"),e.controls.$bookmarkButtonMinimal.attr("tabindex","-1"),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$bookmarkButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$bookmarkButtonMinimal.get(0))),e.controls.$qualityButtonMinimal=e.createButton("quality","h5p-minimal-button",k,function(){e.isDisabled(e.controls.$qualityButton)||(e.controls.$overlayButtons.addClass("h5p-hide"),e.controls.$qualityButton.click())},!0),e.setDisabled(e.controls.$qualityButtonMinimal),e.controls.$qualityButtonMinimal.attr("role","menuitem"),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$qualityButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$qualityButtonMinimal.get(0)),e.controls.$playbackRateButtonMinimal=e.createButton("playbackRate","h5p-minimal-button",k,function(){e.isDisabled(e.controls.$playbackRateButton)||(e.controls.$overlayButtons.addClass("h5p-hide"),e.controls.$playbackRateButton.click())},!0),e.controls.$playbackRateButtonMinimal.attr("role","menuitem"),e.setDisabled(e.controls.$playbackRateButtonMinimal),e.controls.$overlayButtons=e.controls.$overlayButtons.add(e.controls.$playbackRateButtonMinimal),e.minimalMenuKeyboardControls.addElement(e.controls.$playbackRateButtonMinimal.get(0)),e.addQualityChooser(),e.addPlaybackRateChooser(),e.interactionKeyboardControls=new l.default([new u.default]),e.controls.$interactionsContainer=v("<div/>",{role:"menu",class:"h5p-interactions-container","aria-label":e.l10n.interaction,appendTo:n}),e.controls.$bookmarksContainer=v("<div/>",{class:"h5p-bookmarks-container",appendTo:n}),e.hasPlayPromise=!1,e.hasQueuedPause=!1,e.delayed=!1,e.controls.$slider=v("<div/>",{appendTo:n}).slider({value:0,step:.01,orientation:"horizontal",range:"min",max:0,create:function(t){var o=v(t.target).find(".ui-slider-handle");o.attr("role","slider").attr("aria-valuemin","0").attr("aria-valuemax",e.getDuration().toString()).attr("aria-valuetext",i.formatTimeForA11y(0,e.l10n)).attr("aria-valuenow","0"),e.preventSkipping&&e.setDisabled(o).attr("aria-hidden","true")},start:function(){e.currentState!==i.SEEKING&&(e.delayedState||(e.currentState===H5P.Video.ENDED?e.lastState=H5P.Video.PLAYING:e.currentState===H5P.Video.BUFFERING&&e.lastState||(e.lastState=e.currentState)),e.delayedState=!0,clearTimeout(e.delayTimeout),e.delayTimeout=setTimeout(function(){e.delayedState=!1},200),e.hasPlayPromise?e.hasQueuedPause=!0:e.video.pause(),e.currentState=i.SEEKING,e.removeSplash(),e.$overlay.addClass("h5p-visible"))},slide:function(t,o){var n=["Right","Left","ArrowRight","ArrowLeft"],i=-1!==n.indexOf(t.key),r=!i,a=o.value;if(i){var s=e.getDuration();a=-1!==t.key.indexOf("Right")?Math.min(a+5,s):Math.max(a-5,0),e.timeUpdate(a,!0)}return e.video.seek(a),e.updateInteractions(a),e.updateCurrentTime(a),r},stop:function(t,o){e.currentState=e.lastState,e.video.seek(o.value),e.recreateCurrentInteractions();var n=e.lastState===H5P.Video.PLAYING||e.lastState===H5P.Video.VIDEO_CUED||e.hasQueuedPause;if(e.hasPlayPromise)e.hasQueuedPause=!1;else if(n){e.hasQueuedPause=!1;var i=e.video.play();e.hasQueuedPause=!1,i&&i.then?(e.hasPlayPromise=!0,i.then(function(){setTimeout(function(){(e.hasQueuedPause||e.hasActivePauseInteraction())&&e.video.pause(),e.hasPlayPromise=!1},0)})):e.hasActivePauseInteraction()&&(e.video.play(),setTimeout(function(){e.video.pause()},50))}else e.timeUpdate(o.value);e.$overlay.removeClass("h5p-visible")}}),e.preventSkipping&&(e.controls.$slider.slider("disable"),e.controls.$slider.click(function(t){return e.showPreventSkippingMessage(t.offsetX),!1})),e.showBookmarksmenuOnLoad&&!1===e.video.pressToPlay&&e.toggleBookmarksChooser(!0),e.controls.$buffered=v("<div/>",{class:"h5p-buffered",prependTo:e.controls.$slider})},i.prototype.hasActivePauseInteraction=function(){var t=!1;return this.interactions.forEach(function(e){e.getElement()&&e.pause()&&(t=!0)}),t},i.prototype.createButton=function(t,e,o,n,i){var r=this,a={role:"button",tabindex:0,class:(void 0===e?"":e+" ")+"h5p-"+t,on:{click:function(){n.call(this)},keydown:function(t){13!==t.which&&32!==t.which||(n.call(this),t.preventDefault(),t.stopPropagation())}},appendTo:o};return a[i?"text":"aria-label"]=r.l10n[t],H5P.jQuery("<div/>",a)},i.prototype.addQualityChooser=function(){var t=this;if(t.qualityMenuKeyboardControls=new l.default([new u.default]),t.qualityMenuKeyboardControls.on("close",function(){return t.controls.$qualityButton.click()}),this.video.getQualities){var e=this.video.getQualities();if(e&&void 0!==this.controls.$qualityButton&&t.isDisabled(t.controls.$qualityButton)){for(var o=this.video.getQuality(),n="",i=0;i<e.length;i++){var r=e[i],a=r.name===o;n+='<li role="menuitemradio" data-quality="'+r.name+'" aria-checked="'+a+'" aria-describedby="'+t.qualityMenuId+'">'+r.label+"</li>"}var s=v('<ul role="menu">'+n+"</ul>").appendTo(this.controls.$qualityChooser);s.children().click(function(){var e=v(this).attr("data-quality");t.updateQuality(e)}).keydown(function(e){if(32===e.which||13===e.which){var o=v(this).attr("data-quality");t.updateQuality(o)}e.stopPropagation()});s.find("li").get().forEach(function(e){t.qualityMenuKeyboardControls.addElement(e);var o="true"===e.getAttribute("aria-checked");m(e,o)}),t.removeDisabled(this.controls.$qualityButton.add(this.controls.$qualityButtonMinimal))}}},i.prototype.updateQuality=function(t){var e=this;e.video.setQuality(t),"true"===e.controls.$more.attr("aria-expanded")?e.controls.$more.click():(e.controls.$qualityButton.click(),e.controls.$qualityButton.focus())},i.prototype.addPlaybackRateChooser=function(){var t=this,e=this;if(this.playbackRateMenuKeyboardControls=new l.default([new u.default]),this.playbackRateMenuKeyboardControls.on("close",function(){return e.controls.$playbackRateButton.click()}),this.video.getPlaybackRates){var o=this.video.getPlaybackRates();if(!(o.length<2)&&o&&void 0!==this.controls.$playbackRateButton&&e.isDisabled(this.controls.$playbackRateButton)){for(var n=this.video.getPlaybackRate(),i="",r=0;r<o.length;r++){var a=o[r];i+='<li role="menuitemradio" playback-rate="'+a+'" aria-checked="'+(a===n)+'" aria-describedby="'+e.playbackRateMenuId+'">'+a+"</li>"}var s=v('<ul role="menu">'+i+"</ul>").appendTo(this.controls.$playbackRateChooser);s.children().click(function(){var t=v(this).attr("playback-rate");e.updatePlaybackRate(t)}).keydown(function(t){if(32===t.which||13===t.which){var o=v(this).attr("playback-rate");e.updatePlaybackRate(o)}t.stopPropagation()}),s.find("li").get().forEach(function(e){t.playbackRateMenuKeyboardControls.addElement(e);var o="true"===e.getAttribute("aria-checked");m(e,o)}),e.removeDisabled(this.controls.$playbackRateButton.add(this.controls.$playbackRateButtonMinimal))}}},i.prototype.updatePlaybackRate=function(t){var e=this;e.video.setPlaybackRate(t),"true"===e.controls.$more.attr("aria-expanded")?e.controls.$more.click():e.controls.$playbackRateButton.click()},i.prototype.startUpdatingBufferBar=function(){var t=this;if(!t.bufferLoop){!function e(){var o=t.video.getBuffered();o&&t.controls.$buffered&&t.controls.$buffered.css("width",o+"%"),t.bufferLoop=setTimeout(e,500)}()}},i.prototype.resize=function(){if(this.$container){var t=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");this.$videoWrapper.css({marginTop:"",marginLeft:"",width:"",height:""}),this.video.trigger("resize");var e,o,n=this.justVideo?0:this.$controls.height(),i=this.$container.height();if(t){if((o=this.$videoWrapper.height())+n<=i)this.$videoWrapper.css("marginTop",(i-n-o)/2),e=this.$videoWrapper.width();else{var r=this.$videoWrapper.width()/o,a=i-n;e=a*r,this.$videoWrapper.css({marginLeft:(this.$container.width()-e)/2,width:e,height:a})}this.video.trigger("resize")}else e=this.$container.width();this.scaledFontSize=e>this.width?this.fontSize*(e/this.width):this.fontSize,this.$container.css("fontSize",this.scaledFontSize+"px"),this.editor||(e<this.width?this.$container.hasClass("h5p-minimal")||this.$container.addClass("h5p-minimal"):this.$container.hasClass("h5p-minimal")&&this.$container.removeClass("h5p-minimal")),this.isMinimal=this.$container.hasClass("h5p-minimal");var s=this.$videoWrapper.height();if(this.controlsCss={bottom:"",maxHeight:s+"px"},t){var l=n;o+n<=i&&(l=n+(i-n-o)/2),this.controlsCss.bottom=l+"px"}this.controls&&this.controls.$minimalOverlay&&this.controls.$minimalOverlay.css(this.controlsCss),this.$container.find(".h5p-chooser").css(this.controlsCss),this.editor?this.editor.dnb&&this.editor.dnb.dnr.setContainerEm(this.scaledFontSize):(this.resizeMobileView(),void 0!==this.$splash&&this.resizeStartScreen()),this.resizeInteractions()}},i.prototype.resizeMobileView=function(){if(!isNaN(this.currentState)){if(this.$container.width()/parseInt(this.$container.css("font-size"),10)<30){if(this.resizeInteractions(),!this.isMobileView){if(this.$container.addClass("mobile"),this.isMobileView=!0,this.hasUncompletedRequiredInteractions()){var t=v(".h5p-dialog",this.$container);t.show()}else this.restoreTabIndexes(),this.dnb.dialog.closeOverlay();this.recreateCurrentInteractions()}}else if(this.isMobileView){if(this.dnb&&this.dnb.dialog&&!this.hasUncompletedRequiredInteractions()){this.dnb.dialog.close(!0);var e=this.$container.find(".h5p-dialog .h5p-image img");e.css({width:"",height:""})}this.$container.removeClass("mobile"),this.isMobileView=!1,this.recreateCurrentInteractions()}}},i.prototype.resizeInteractions=function(){if(!isNaN(this.currentState)){var t=this;this.interactions.forEach(function(e){e.resizeInteraction(),e.repositionToWrapper(t.$videoWrapper),e.positionLabel(t.$videoWrapper.width())})}},i.prototype.recreateCurrentInteractions=function(){this.dnb.blurAll(),this.interactions.forEach(function(t){t.reCreateInteraction()})},i.prototype.resizeStartScreen=function(){var t=50,e=!0,o=!0;void 0!==this.startScreenOptions.shortStartDescription&&this.startScreenOptions.shortStartDescription.length||(e=!1,this.startScreenOptions.hideStartTitle&&(o=!1,t=45));var n=v(".h5p-splash-description",this.$splash),i=v(".h5p-splash-title",this.$splash),r=n.clone().css("position","absolute").addClass("minimum-font-size").appendTo(n.parent()),a=i.clone().css("position","absolute").addClass("minimum-font-size").appendTo(i.parent()),s=parseInt(r.css("font-size"),10),l=parseInt(a.css("font-size"),10),c=this.$container.width(),u=parseInt(c/t,10);e||(o&&u<s?u=s:u<10&&(u=10)),c<510?this.$splash.addClass("mobile"):this.$splash.removeClass("mobile"),.8*u<s?n.addClass("minimum-font-size"):n.removeClass("minimum-font-size"),1.5*u<l?i.addClass("minimum-font-size"):i.removeClass("minimum-font-size"),this.$splash.css("font-size",u),r.remove(),a.remove()},i.prototype.toggleFullScreen=function(){var t=this;H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():(void 0===H5P.fullScreenBrowserPrefix?v(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"](),t.trigger("exitFullScreen")):(H5P.fullScreen(this.$container,this),void 0===H5P.exitFullScreen&&t.trigger("enterFullScreen")),this.resizeInteractions()},i.prototype.timeUpdate=function(t,e){var o=this;if(t>=0)try{var n=o.controls.$slider.find(".ui-slider-handle"),r=i.formatTimeForA11y(t,o.l10n);o.controls.$slider.slider("option","value",t),n.attr("aria-valuetext",r),n.attr("aria-valuenow",t.toString())}catch(t){return}o.updateInteractions(t),e||setTimeout(function(){(o.currentState===H5P.Video.PLAYING||o.currentState===H5P.Video.BUFFERING&&o.lastState===H5P.Video.PLAYING)&&o.timeUpdate(o.video.getCurrentTime())},40)},i.prototype.updateInteractions=function(t){var e=this,o=Math.floor(10*t)/10;o!==e.lastTenth&&void 0!==e.bookmarksMap&&void 0!==e.bookmarksMap[o]&&e.bookmarksMap[o].mouseover().mouseout(),e.lastTenth=o;var n=Math.floor(t);n!==e.lastSecond&&(e.toggleInteractions(n),e.currentState!==H5P.Video.PLAYING&&e.currentState!==H5P.Video.PAUSED||e.updateCurrentTime(n)),e.lastSecond=n},i.prototype.updateCurrentTime=function(t){var e=this;t=Math.max(t,0);var o=i.humanizeTime(t),n=i.formatTimeForA11y(t,e.l10n);e.controls.$currentTime.html(o),e.controls.$currentTimeA11y.html(e.l10n.currentTime+" "+n),e.controls.$currentTimeSimple.html(o),e.controls.$currentTimeA11ySimple.html(e.l10n.currentTime+" "+n)},i.prototype.complete=function(){this.editor||(this.completedSent||this.triggerXAPIScored(this.getUsersScore(),this.getUsersMaxScore(),"completed"),this.completedSent=!0)},i.prototype.getUsersScore=function(){for(var t=0,e=0;e<this.interactions.length;e++)this.interactions[e].score&&(t+=this.interactions[e].score);return t},i.prototype.getUsersMaxScore=function(){for(var t=0,e=0;e<this.interactions.length;e++)this.interactions[e].maxScore&&(t+=this.interactions[e].maxScore);return t},i.prototype.getScore=function(){return this.getUsersScore()},i.prototype.getMaxScore=function(){return this.getUsersMaxScore()},i.prototype.showOverlayMask=function(){var t=this;t.$videoWrapper.addClass("h5p-disable-opt-out"),t.disableTabIndexes(),t.dnb.dialog.openOverlay(),t.restorePosterTabIndexes(),t.$container.find(".h5p-dialog-wrapper").click(function(){t.hasUncompletedRequiredInteractions()&&t.showWarningMask()}),t.toggleFocusTrap()},i.prototype.restorePosterTabIndexes=function(){var t=this;t.$overlay.find(".h5p-interaction.h5p-poster").each(function(){t.restoreTabIndexes(v(this))})},i.prototype.disableTabIndexes=function(){var t=this,e=t.$container.find(".h5p-dialog-wrapper");t.$tabbables=t.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){var t=v(this),o=v.contains(e.get(0),t.get(0));if(t.data("tabindex"))return!0;if(!o){var n=t.attr("tabindex");return t.data("tabindex",n),t.attr("tabindex","-1"),!0}return!1})},i.prototype.restoreTabIndexes=function(t){var e=this;e.$tabbables&&(e.$tabbables.each(function(){var e=v(this),o=e.data("tabindex");if(t&&!v.contains(t.get(0),e.get(0)))return!0;e.hasClass("ui-slider-handle")?(e.attr("tabindex",0),e.removeData("tabindex")):void 0!==o?(e.attr("tabindex",o),e.removeData("tabindex")):e.removeAttr("tabindex")}),t||(e.$tabbables=void 0))},i.prototype.toggleFocusTrap=function(){var t=this,e=this.getVisibleInteractions().filter(function(t){return t.getRequiresCompletion()&&!t.hasFullScore()});e.length>0?this.$container.off("focusin").on("focusin",function(o){return t.trapFocusInInteractions(e,v(o.target))}):this.$container.off("focusin","**")},i.prototype.trapFocusInInteractions=function(t,e){var o=t.some(function(t){var o=t.getElement();return $(o,e)}),n=!!this.$mask&&$(this.$mask,e);if(!o&&!n){var i=t[0].getElement();i&&i.focus()}},i.prototype.hideOverlayMask=function(){var t=this;return t.restoreTabIndexes(),t.dnb.dialog.closeOverlay(),t.$videoWrapper.removeClass("h5p-disable-opt-out"),t.toggleFocusTrap(),t.$container.find(".h5p-dialog-wrapper")},i.prototype.showWarningMask=function(){var t=this,e="interactive-video-"+t.contentId+"-"+t.instanceIndex+"-completion-warning-text";return t.$mask||(t.$mask=v('<div class="h5p-warning-mask" role="alertdialog" aria-describedby="'+e+'">\n        <div class="h5p-warning-mask-wrapper">\n          <div id="'+e+'" class="h5p-warning-mask-content">'+t.l10n.requiresCompletionWarning+'</div>\n          <button type="button" class="h5p-joubelui-button h5p-button-back">'+t.l10n.back+"</button>\n        </div>\n      </div>").click(function(){t.$mask.hide()}).appendTo(t.$container)),t.$mask.show(),t.$mask.find(".h5p-button-back").focus(),t.$mask},i.prototype.setDisabled=function(t){return t.attr("aria-disabled","true").attr("tabindex","-1")},i.prototype.isDisabled=function(t){return"true"===t.attr("aria-disabled")},i.prototype.removeDisabled=function(t){return t.removeAttr("aria-disabled").attr("tabindex","0")},i.prototype.hasUncompletedRequiredInteractions=function(t){var e=this;return(void 0!==t?e.getVisibleInteractionsAt(t):e.getVisibleInteractions()).some(function(t){return t.getRequiresCompletion()&&!t.hasFullScore()})},i.prototype.getVisibleInteractions=function(){return this.interactions.filter(function(t){return t.isVisible()})},i.prototype.getVisibleInteractionsAt=function(t){return this.interactions.filter(function(e){return e.visibleAt(t)})},i.prototype.showSolutions=function(){},i.prototype.getTitle=function(){return H5P.createTitle(this.options.video.startScreenOptions.title)},i.prototype.toggleInteractions=function(t){for(var e=0;e<this.interactions.length;e++)this.interactions[e].toggle(t),this.interactions[e].repositionToWrapper(this.$videoWrapper);this.accessibility.announceInteractions(this.interactions)},i.prototype.play=function(){this.video.play()},i.prototype.seek=function(t){this.video.seek(t)},i.prototype.pause=function(){this.video&&this.video.pause&&this.video.pause()},i.prototype.resetTask=function(){if(void 0!==this.controls){this.seek(0),this.timeUpdate(-1),this.controls.$slider.slider("option","value",0);for(var t=0;t<this.interactions.length;t++)this.interactions[t].resetTask()}},i.prototype.read=function(t){var e=this;e.$read&&(e.readText?e.readText+=("."===e.readText.substr(-1,1)?" ":". ")+t:e.readText=t,e.$read.html(e.readText),setTimeout(function(){e.readText=null,e.$read.html("")},100))},i.prototype.getCopyrights=function(){var t=this,e=new H5P.ContentCopyrights;void 0!==t.options.video.files&&void 0!==t.options.video.files[0]&&e.addMedia(new H5P.MediaCopyright(t.options.video.files[0].copyright,t.l10n)),void 0!==t.options.video.startScreenOptions.copyright&&e.addMedia(t.options.video.startScreenOptions.copyright);var o=t.options.video.startScreenOptions.poster;if(o&&void 0!==o.copyright){var n=new H5P.MediaCopyright(o.copyright,t.l10n),i=H5P.getPath(o.path,t.contentId);n.setThumbnail(new H5P.Thumbnail(i,o.width,o.height)),e.addMedia(n)}for(var r=0;r<t.interactions.length;r++){var a=t.interactions[r].getCopyrights();a&&e.addContent(a)}return e},i.SEEKING=4,i.LOADED=5,i.ATTACHED=6,i.humanizeTime=function(t){var e=i.secondsToMinutesAndHours(t),o="";return 0!==e.hours&&(o+=e.hours+":",e.minutes<10&&(o+="0")),o+=e.minutes+":",e.seconds<10&&(o+="0"),o+=e.seconds},i.formatTimeForA11y=function(t,e){var o=i.secondsToMinutesAndHours(t);return(o.hours>0?o.hours+" "+e.hours+", ":"")+o.minutes+" "+e.minutes+", "+o.seconds+" "+e.seconds},i.secondsToMinutesAndHours=function(t){var e=Math.floor(t/60);return{seconds:Math.floor(t%60),minutes:e%60,hours:Math.floor(e/60)}};var m=function(t,e){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")},b=function(t,e){for(var o=0;o<e.length;o++)if(e[o].name===t)return e[o]},g=function(t,e){null===t?e():setTimeout(e,t)},y=function(){return void 0===window.interactiveVideoCounter&&(window.interactiveVideoCounter=0),window.interactiveVideoCounter++};i.prototype.getXAPIData=function(){var t=this,e=this.createXAPIEventTemplate("answered");k(e),e.setScoredResult(t.getScore(),t.getMaxScore(),t,!0,t.getScore()===t.getMaxScore());var o=C(t.interactions);return{statement:e.data.statement,children:o}};var k=function(t){var e=t.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(e,S())},S=function(){var t={};return t.interactionType="compound",t.type="http://adlnet.gov/expapi/activities/cmi.interaction",t.description={"en-US":""},t},$=function(t,e){return void 0!==t&&void 0!==e&&(t.is(e)||v.contains(t.get(0),e.get(0)))},C=function(t){return t.map(function(t){return t.getXAPIData()}).filter(function(t){return!!t})};e.default=i;e.KEY_CODE_START_PAUSE=75},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),a=o(8),s=o(2),l=o(9),c=(0,a.removeAttribute)("tabindex"),u=((0,s.forEach)(c),(0,a.setAttribute)("tabindex","0")),d=(0,a.setAttribute)("tabindex","-1"),h=(0,a.hasAttribute)("tabindex"),p=function(){function t(e){n(this,t),i(this,(0,l.Eventful)()),this.plugins=e||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.initPlugins()}return r(t,[{key:"addElement",value:function(t){this.elements.push(t),this.firesEvent("addElement",t),1===this.elements.length&&this.setTabbable(t)}},{key:"insertElementAt",value:function(t,e){this.elements.splice(e,0,t),this.firesEvent("addElement",t),1===this.elements.length&&this.setTabbable(t)}},{key:"removeElement",value:function(t){this.elements=(0,s.without)([t],this.elements),h(t)&&(this.setUntabbable(t),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",t)}},{key:"count",value:function(){return this.elements.length}},{key:"firesEvent",value:function(t,e){var o=this.elements.indexOf(e);return this.fire(t,{element:e,index:o,elements:this.elements,oldElement:this.tabbableElement})}},{key:"nextElement",value:function(t){var e=t.index,o=e===this.elements.length-1,n=this.elements[o?0:e+1];this.setTabbable(n),n.focus()}},{key:"setTabbable",value:function(t){(0,s.forEach)(this.setUntabbable.bind(this),this.elements),u(t),this.tabbableElement=t}},{key:"setUntabbable",value:function(t){this.negativeTabIndexAllowed?d(t):c(t)}},{key:"previousElement",value:function(t){var e=t.index,o=0===e,n=this.elements[o?this.elements.length-1:e-1];this.setTabbable(n),n.focus()}},{key:"useNegativeTabIndex",value:function(){this.negativeTabIndexAllowed=!0,this.elements.forEach(function(t){t.hasAttribute("tabindex")||d(t)})}},{key:"initPlugins",value:function(){this.plugins.forEach(function(t){void 0!==t.init&&t.init(this)},this)}}]),t}();e.default=p},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.curry=function(t){var e=t.length;return function o(){var n=Array.prototype.slice.call(arguments,0);return n.length>=e?t.apply(null,n):function(){var t=Array.prototype.slice.call(arguments,0);return o.apply(null,n.concat(t))}}},i=(e.compose=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})},e.forEach=n(function(t,e){e.forEach(t)}),e.map=n(function(t,e){return e.map(t)}),e.filter=n(function(t,e){return e.filter(t)})),r=(e.some=n(function(t,e){return e.some(t)}),e.contains=n(function(t,e){return-1!=e.indexOf(t)}));e.without=n(function(t,e){return i(function(e){return!r(e,t)},e)}),e.inverseBooleanString=function(t){return("true"!==t).toString()}},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.selectability=!0}return i(t,[{key:"init",value:function(t){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=t,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}},{key:"listenForKeyDown",value:function(t){t.element.addEventListener("keydown",this.boundHandleKeyDown)}},{key:"removeKeyDownListener",value:function(t){t.element.removeEventListener("keydown",this.boundHandleKeyDown)}},{key:"handleKeyDown",value:function(t){switch(t.which){case 27:this.close(t.target),t.preventDefault(),t.stopPropagation();break;case 13:case 32:this.select(t.target),t.preventDefault(),t.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(t)||(this.previousElement(t.target),t.preventDefault(),t.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(t)||(this.nextElement(t.target),t.preventDefault(),t.stopPropagation())}}},{key:"hasChromevoxModifiers",value:function(t){return t.shiftKey||t.ctrlKey}},{key:"previousElement",value:function(t){this.controls.firesEvent("previousElement",t)}},{key:"nextElement",value:function(t){this.controls.firesEvent("nextElement",t)}},{key:"select",value:function(t){this.selectability&&!1!==this.controls.firesEvent("before-select",t)&&(this.controls.firesEvent("select",t),this.controls.firesEvent("after-select",t))}},{key:"disableSelectability",value:function(){this.selectability=!1}},{key:"enableSelectability",value:function(){this.selectability=!0}},{key:"close",value:function(t){!1!==this.controls.firesEvent("before-close",t)&&(this.controls.firesEvent("close",t),this.controls.firesEvent("after-close",t))}}]),t}();e.default=r},function(t,e,o){"use strict";o(5),o(6);var n=o(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n);H5P=H5P||{},H5P.InteractiveVideo=i.default},function(t,e){},function(t,e){},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),r=n(i),a=o(3),s=n(a),l={ICON:0,TEXT:1},c=function(t,e,o,n,i,a){var c=this,h="interactive-video-"+a+"-menu-"+t,p=new r.default([new s.default]);p.on("close",function(){return b()});var f=[];H5P.EventDispatcher.call(c);var v,m=function(){c.control.setAttribute("aria-expanded","true"),c.popup.classList.add("h5p-show"),c.trigger("open"),c.popup.querySelector('li[tabindex="0"]').focus()},b=function(){c.control.setAttribute("aria-expanded","false"),c.control.focus(),c.popup.classList.remove("h5p-show"),c.trigger("close")},g=function(){"true"===c.control.getAttribute("aria-expanded")?b():m()},y=function(t,e,o){for(var n=0;n<t.length;n++)e.call(o,t[n],n)},k=function(t,e){o=e;var n=v.querySelectorAll('[aria-checked="true"]');y(n,function(t){return t.setAttribute("aria-checked","false")},this),t.setAttribute("aria-checked","true"),b(),c.trigger("select",e)},S=function(t){var e=t.value===o.value,i=d(null,l.TEXT,t.label,function(){k(this,t)},"li",n);return f.push({option:t,element:i}),i.setAttribute("aria-checked",e.toString()),i.setAttribute("aria-describedby",h),p.addElement(i),e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"),i};c.updateOptions=function(t){v&&v.parentNode.removeChild(v),v=u(null,null,"ol"),v.setAttribute("role","menu");for(var e=0;e<t.length;e++)v.appendChild(S(t[e]));c.popup.appendChild(v)},c.popup=u("h5p-chooser h5p-"+t,'<h3 id="'+h+'">'+i[t]+"</h3>"),c.popup.setAttribute("role","dialog");var $=d("h5p-chooser-close-button",l.ICON,i.close,g,"div","button");c.popup.appendChild($),c.control=d("h5p-control h5p-"+t,l.ICON,i[t],g,"div","button"),c.control.setAttribute("aria-haspopup","true"),c.overlayControl=d("h5p-minimal-button h5p-"+t,l.TEXT,i[t],g,"div","menuitem"),c.overlayControl.tabIndex="-1",c.overlayControl.classList.add("h5p-hide"),c.updateOptions(e)};c.prototype=Object.create(H5P.EventDispatcher.prototype),c.prototype.constructor=c;var u=function(t,e,o){var n=document.createElement(o||"div");return t&&(n.className=t),e&&(n.innerHTML=e),n},d=function(t,e,o,n,i,r){var a=u(t,e===l.TEXT?o:"",i);return a.tabIndex=0,a.setAttribute("role",r),e===l.ICON&&(a.title=o),a.addEventListener("click",function(t){n.call(a,t)},!1),a.addEventListener("keydown",function(t){32!==t.which&&13!==t.which||(t.preventDefault(),n.call(a,t))},!1),a};e.default=c},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createElement=e.toggleClass=e.toggleVisibility=e.show=e.hide=e.removeClass=e.addClass=e.classListContains=e.removeChild=e.querySelectorAll=e.nodeListToArray=e.querySelector=e.appendChild=e.toggleAttribute=e.attributeEquals=e.hasAttribute=e.removeAttribute=e.setAttribute=e.getAttribute=void 0;var n=o(2),i=e.getAttribute=(0,n.curry)(function(t,e){return e.getAttribute(t)}),r=e.setAttribute=(0,n.curry)(function(t,e,o){return o.setAttribute(t,e)}),a=(e.removeAttribute=(0,n.curry)(function(t,e){return e.removeAttribute(t)}),e.hasAttribute=(0,n.curry)(function(t,e){return e.hasAttribute(t)}),e.attributeEquals=(0,n.curry)(function(t,e,o){return o.getAttribute(t)===e}),e.toggleAttribute=(0,n.curry)(function(t,e){var o=i(t,e);r(t,(0,n.inverseBooleanString)(o),e)}),e.appendChild=(0,n.curry)(function(t,e){return t.appendChild(e)}),e.querySelector=(0,n.curry)(function(t,e){return e.querySelector(t)}),e.nodeListToArray=function(t){return Array.prototype.slice.call(t)}),s=(e.querySelectorAll=(0,n.curry)(function(t,e){return a(e.querySelectorAll(t))}),e.removeChild=(0,n.curry)(function(t,e){return t.removeChild(e)}),e.classListContains=(0,n.curry)(function(t,e){return e.classList.contains(t)}),e.addClass=(0,n.curry)(function(t,e){return e.classList.add(t)})),l=e.removeClass=(0,n.curry)(function(t,e){return e.classList.remove(t)}),c=e.hide=s("hidden"),u=e.show=l("hidden");e.toggleVisibility=(0,n.curry)(function(t,e){return(t?u:c)(e)}),e.toggleClass=(0,n.curry)(function(t,e,o){o.classList[e?"add":"remove"](t)}),e.createElement=function(t){var e=t.tag,o=t.id,n=t.classes,i=t.attributes,r=document.createElement(e);return o&&(r.id=o),n&&n.forEach(function(t){r.classList.add(t)}),i&&Object.keys(i).forEach(function(t){r.setAttribute(t,i[t])}),r}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Eventful=function(){return{listeners:{},on:function(t,e,o){var n={listener:e,scope:o};return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(n),this},fire:function(t,e){return(this.listeners[t]||[]).every(function(t){return!1!==t.listener.call(t.scope||this,e)})},propagate:function(t,e){var o=this;t.forEach(function(t){return e.on(t,function(e){return o.fire(t,e)})})}}}},function(t,e,o){"use strict";function n(t,e,o){var n=this;H5P.EventDispatcher.call(n);var d,p,v,m,b=t.action;o&&(b.userDatas={state:o});var g,y,k,S=b.library.split(" ")[0],$=e.l10n[h(S,t)?"content":"interaction"],C="H5P.Nil"!==S&&"button"===t.displayType,w=[b.params.contentName,C?l(t.label):"",t.libraryTitle].filter(s)[0],T=!1,P=!1,x=!1;this.on("open-dialog",function(){q()}),this.on("show-mask",function(){N(this.getElement())});var I=function(){return a.extend({},{backgroundColor:"rgb(255,255,255)",boxShadow:!0},t.visuals)},E=function(o){d=a("<div/>",{tabindex:0,role:"button",class:"h5p-interaction "+g+(o?"":" h5p-hidden"),"aria-popup":"true","aria-expanded":"false","aria-label":w,css:{left:t.x+"%",top:t.y+"%",width:"",height:""},on:{click:function(){n.dialogDisabled||(q(),d.attr("aria-expanded","true"))},keydown:function(t){13!==t.which&&32!==t.which||n.dialogDisabled||(q(),d.attr("aria-expanded","true"),t.preventDefault())}}}),d.on("keyup",M),n.on("closeDialog",function(){d&&(d.focus(),d.attr("aria-expanded","false"))}),n.getRequiresCompletion()&&void 0===e.editor&&e.currentState!==H5P.InteractiveVideo.SEEKING&&q(!0),a("<div/>",{class:"h5p-touch-area"}).appendTo(d),a("<div/>",{class:"h5p-interaction-button"}).appendTo(d),e.editor&&d.hover(function(){d.is(".focused")||d.is(":focus")||e.dnb&&(!e.dnb||e.dnb.newElement)?(e.editor.hideInteractionTitle(),T=!1):(e.editor.showInteractionTitle(w,d),T=!0)},function(){e.editor.hideInteractionTitle(),T=!1}).focus(function(){e.editor.hideInteractionTitle(),T=!1}).click(function(){e.editor.hideInteractionTitle()});var i=s(l(t.label));t.label&&i&&(p=A(t.label,"h5p-interaction").appendTo(d)),n.trigger("display",d),setTimeout(function(){d&&d.removeClass("h5p-hidden")},0)},A=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return a("<div/>",{class:"h5p-interaction-label "+e,html:'<div class="h5p-interaction-label-text">'+t+"</div>"})},B=function(){return d=A(t.label,"h5p-interaction h5p-interaction-label-standalone"),d=d.css({left:t.x+"%",top:t.y+"%",width:"",height:"initial"}),n.trigger("display",d),setTimeout(function(){d&&d.removeClass("h5p-hidden")},0),d},M=function(t){t.which===r.KEY_CODE_START_PAUSE&&t.stopPropagation()},H=function(e){if("timecode"===t.goto.type)e.click(function(e){1===e.which&&F({data:t.goto.time})}).keypress(function(e){32===e.which&&F({data:t.goto.time})}).attr("href","#").attr("tabindex","0");else{var o=t.goto.url;e.keypress(function(t){32===t.which&&this.click()}).attr({href:("other"!==o.protocol?o.protocol:"")+o.url,target:"_blank"})}return e.addClass("goto-clickable")},D=function(t){var o=!e.hasUncompletedRequiredInteractions(t);n.trigger("hide",d),n.isButton()?o&&e.dnb.dialog.close():(e.isMobileView&&o&&e.dnb.dialog.close(),d.detach()),n.trigger("remove",d),o&&U(d)},V=function(){var t=document.createElement("button");return t.innerHTML=e.l10n.continueWithVideo,t.className="h5p-interaction-continue-button",t.addEventListener("click",function(){D(),e.play()}),t},O=function(t){if("H5P.Questionnaire"===S){if(t.find(".h5p-interaction-continue-button").length)return;var o=V(),n=t.find(".h5p-questionnaire-success-center");n.length&&n.get(0).appendChild(o),y.on("noSuccessScreen",function(){D(),e.play()})}},R=function(t,e){var o=function(t){return e.target===t.get(0)},n=9===e.which,i=t.first(),r=t.last();n&&e.shiftKey&&o(i)?(r.focus(),e.preventDefault()):n&&o(r)&&(i.focus(),e.preventDefault())},q=function(o){var i=e.$container.find(".h5p-dialog-wrapper");"function"==typeof y.setActivityStarted&&"function"==typeof y.getScore&&y.setActivityStarted();var r=n.isGotoClickable(),s=i.find("[tabindex]"),l=a(r?"<a>":"<div>",{class:"h5p-dialog-interaction h5p-frame"});!r&&f(S)&&l.attr("tabindex","0"),l.on("keyup",M),void 0!==e.editor?l.attr("tabindex",-1):0===s.length&&l.attr("tabindex",0),n.getRequiresCompletion()&&i.keydown(function(t){var e=i.find('[tabindex="0"], button, input').filter(":visible");R(e,t)});var h=r?H(l):l;if(y.attach(h),O(h),G(y)&&(n.score=y.getScore(),n.maxScore=y.getMaxScore()),!n.hasFullScore()||!o){n.getRequiresCompletion()&&!n.hasFullScore()&&(e.dnb.dialog.hideCloseButton(),e.dnb.dialog.disableOverlay=!0,i.click(function(){if(!n.hasFullScore()){e.showWarningMask().find(".h5p-button-back").click(function(){return l.find("button").last().focus()})}})),e.dnb.dialog.open(l),e.disableTabIndexes(),e.dnb.dialog.addLibraryClass(S),e.dnb.dialog.toggleClass("goto-clickable-visualize",!(!r||!t.goto.visualize)),e.dnb.dialog.toggleClass("h5p-goto-timecode",u(t,c.TIME_CODE)),e.dnb.dialog.disableOverlay&&e.restorePosterTabIndexes();var p=function t(){this.off("close",t),e.dnb.$dialogContainer.one("transitionend",function(){if(l.is(".h5p-image")){l.find("img").css({width:"",height:""})}});try{void 0!==y.pause&&(y.pause instanceof Function||"function"==typeof y.pause)&&y.pause()}catch(t){H5P.error(t)}};e.dnb.dialog.on("close",p),e.dnb.dialog.on("close",function(){return n.trigger("closeDialog")});var v=function t(){n.dialogWidth=e.dnb.dialog.getDialogWidth(),e.dnb.dialog.off("close",t)};if(e.dnb.dialog.on("close",v),"H5P.Image"===S){var m=e.dnb.dialog.getMaxSize(d),g=l.find("img");b.params.file.width&&b.params.file.height?L(g,m,{width:b.params.file.width,height:b.params.file.height},!e.isMobileView):(g.load(function(){g.is(":visible")&&L(g,m,{width:this.width,height:this.height},!e.isMobileView)}),e.dnb.dialog.position(d))}else e.isMobileView||e.dnb.dialog.position(d,{width:n.dialogWidth/16},!("H5P.Text"===S||"H5P.Table"===S));if("H5P.Summary"===S){var k=0;H5P.on(y,"resize",function(){var t=l.height();(k>t+10||k<t-10)&&setTimeout(function(){e.dnb.dialog.scroll(t,300)},500),k=t})}setTimeout(function(){H5P.trigger(y,"resize")},0)}},L=function(t,o,n,i){n.width/=16,n.height/=16,n.height>o.height&&(n.width=n.width*o.height/n.height,n.height=o.height),n.width>o.width&&(n.height=n.height*o.width/n.width,n.width=o.width);var r=16/Number(t.css("fontSize").replace("px",""));t.css({width:n.width*r+"em",height:n.height*r+"em"}),i&&e.dnb.dialog.position(d,n)},F=function(t){n.isButton()&&e.dnb.dialog.close(),e.currentState!==H5P.Video.PAUSED&&e.currentState!==H5P.Video.ENDED||e.play(),e.seek(t.data)},z=function(){var o=t.height||10,n=t.width||10,i=e.width/e.fontSize;return{height:o/(i/(e.$videoWrapper.width()/e.$videoWrapper.height()))*100+"%",width:n/i*100+"%"}},N=function(t){t.css("zIndex",52),e.showOverlayMask()},U=function(t){t&&t.css("zIndex",""),e.hideOverlayMask()},j=function(){var o=n.isGotoClickable(),i=z(),r=I();if(d=a("<div/>",{"aria-label":e.l10n.interaction,tabindex:"-1",class:"h5p-interaction h5p-poster "+g+(o&&t.goto.visualize?" goto-clickable-visualize":""),css:{left:t.x+"%",top:t.y+"%",width:i.width,height:i.height}}),d.on("keyup",M),"H5P.IVHotspot"!==S){d.css("background",r.backgroundColor);var s=r.backgroundColor.split(",");if(s[3]){0===parseFloat(s[3].replace(")",""))&&d.addClass("h5p-transparent-interaction")}}!1===r.boxShadow&&d.addClass("h5p-box-shadow-disabled"),"H5P.Link"===S&&(d.css("height","auto"),d.css("width","auto"),void 0===e.editor&&d.click(function(){return window.open(y.getUrl()),e.pause(),!1})),m=a("<div>",{class:"h5p-interaction-outer"}).appendTo(d),v=a(o?"<a>":"<div>",{class:"h5p-interaction-inner h5p-frame"}).appendTo(m),!o&&f(S)&&v.attr("tabindex","0"),void 0!==e.editor&&y.disableAutoPlay&&y.disableAutoPlay();var l=o?H(v):v;y.attach(l),O(l),n.trigger("display",d),n.getRequiresCompletion()&&e.currentState!==H5P.InteractiveVideo.SEEKING&&void 0===e.editor&&!n.hasFullScore()&&(N(d),d.focus()),setTimeout(function(){H5P.trigger(y,"resize")},0),"function"==typeof y.setActivityStarted&&"function"==typeof y.getScore&&y.setActivityStarted()},W=function(){var o,i,r=!0;if(t.adaptivity&&(i=n.hasFullScore(),r=!n.getRequiresCompletion()||i,i?o=t.adaptivity.correct:i||(o=t.adaptivity.wrong)),!o||void 0===o.seekTo)return void(void 0!==y.hasButton&&(y.hasButton("iv-continue")||y.addButton("iv-continue",e.l10n.defaultAdaptivitySeekLabel,function(){D(),_()}),y[r?"showButton":"hideButton"]("iv-continue")));e.pause(),!o.allowOptOut&&d&&(n.isButton()?(e.dnb.dialog.disableOverlay=!0,e.dnb.dialog.hideCloseButton()):N(d));var a=i?"correct":"wrong",s=o.seekLabel?o.seekLabel:e.l10n.defaultAdaptivitySeekLabel;y.hideButton("iv-continue").addButton("iv-adaptivity-"+a,s,function(){D(o.seekTo),!i&&y.resetTask&&(y.resetTask(),y.hideButton("iv-adaptivity-"+a)),n.remove(),_(o.seekTo)}).showButton("iv-adaptivity-"+a,1).hideButton("iv-adaptivity-"+(i?"wrong":"correct"),1).hideButton("check-answer",1).hideButton("show-solution",1).hideButton("try-again",1),void 0!==y.disableInput&&(y.disableInput instanceof Function||"function"==typeof y.disableInput)&&y.disableInput(),setTimeout(function(){var t=o.message.replace("<p>","").replace("</p>","");y.updateFeedbackContent(t,!0),y.read(t)},0)},_=function(t){var o=K(),n=o.filter(function(t){return!t.isButton()});if(n.length?o=n:o.length&&e.$container.find(".h5p-dialog-wrapper .h5p-dialog").show(),o.length){var i=o[0];return i.isButton()?i.trigger("open-dialog"):i.trigger("show-mask"),void e.pause()}e.currentState!==H5P.Video.ENDED&&(void 0!==t&&(e.pause(),e.seek(t)),e.play(),e.controls.$play.focus())},K=function(){return e.getVisibleInteractions().filter(function(t){return t!==n}).filter(function(t){return t.getRequiresCompletion()&&!t.hasFullScore()})},Q=function(){var e=t.className;if(void 0===e){var o=b.library.split(" ")[0].toLowerCase().split(".");e=o[0]+"-"+o[1]+"-interaction"}return t.goto&&"timecode"===t.goto.type&&(e+=" h5p-goto-timecode"),e};n.isGotoClickable=function(){return-1!==["H5P.Text","H5P.Image"].indexOf(S)&&t.goto&&-1!==["timecode","url"].indexOf(t.goto.type)},n.getCurrentState=function(){if(y&&(y.getCurrentState instanceof Function||"function"==typeof y.getCurrentState))return y.getCurrentState()},n.getDuration=function(){return{from:t.duration.from,to:t.duration.to}},n.getRequiresCompletion=function(){return!!t.adaptivity&&!!t.adaptivity.requireCompletion},n.pause=function(){return t.pause},n.isButton=function(){return"button"===t.displayType||!(!e.isMobileView||"H5P.IVHotspot"===S)&&("H5P.Image"!==S||!1!==t.buttonOnMobile)},n.isStandaloneLabel=function(){return"H5P.Nil"===S},n.isMainSummary=function(){return!0===t.mainSummary},n.selectDot=function(){e.preventSkipping||(e.seekingTo=!0,Math.floor(10*e.video.getCurrentTime())!==Math.floor(10*t.duration.from)&&(e.currentState===H5P.Video.VIDEO_CUED?(e.play(),e.seek(t.duration.from)):e.currentState===H5P.Video.PLAYING?e.seek(t.duration.from):(e.play(),e.seek(t.duration.from),e.pause())))},n.addDot=function(){if("H5P.Nil"!==S){var o="h5p-seekbar-interaction "+g,i=a("<div/>",{role:"menuitem",class:o,"aria-label":$+". "+w,title:w,css:{left:t.duration.from*e.oneSecondInPercentage+"%"},on:{click:n.selectDot,keydown:function(t){if(13===t.which||32===t.which)return n.selectDot(),!1}}});return e.preventSkipping&&i.attr("aria-disabled","true").attr("tabindex","-1"),i}},n.isVisible=function(){return x},n.visibleAt=function(e){return!(e<t.duration.from||e>t.duration.to)},n.toggle=function(o,i){return o=Math.floor(o),n.visibleAt(o)?d?void 0:(x=!0,n.isStandaloneLabel()?B():n.isButton()?E(i):j(),void 0===e.editor?k=e.dnb.add(d,void 0,{dnbElement:k,disableContextMenu:!0}):(n.fit&&(e.editor.fit(d,t),n.fit=!1),d.focus(function(){e.pause()})),d):(x=!1,void(d&&(k&&(k.hideContextMenu(),k===e.dnb.focusedElement&&(k.blur(),delete e.dnb.focusedElement)),e.editor&&T&&(e.editor.hideInteractionTitle(),T=!1),n.remove())))},n.setTitle=function(t){d&&d.attr("aria-label",t),w=t},n.reCreateInteraction=function(){"H5P.IVHotspot"!==S&&d&&(n.trigger("hide",d),d.detach(),n.isStandaloneLabel()?B():n.isButton()?E(!0):j())},n.resizeInteraction=function(){n.isStandaloneLabel()||H5P.trigger(y,"resize")},n.positionLabel=function(t){d&&n.isButton()&&p&&!n.isStandaloneLabel()&&(p.removeClass("h5p-left-label"),parseInt(d.css("left"))+p.position().left+p.outerWidth()>t&&p.addClass("h5p-left-label"))},n.setPosition=function(e,o){t.x=e,t.y=o,d.css({left:e+"%",top:o+"%"})},n.setSize=function(e,o){e&&(t.width=e),o&&(t.height=o),H5P.trigger(y,"resize")},n.remove=function(){d&&(n.trigger("domHidden",{$dom:d,key:"videoProgressedPast"},{bubbles:!0,external:!0}),n.trigger("hide",d),d.detach(),d=void 0)},n.reCreate=function(){g=Q(),n.isStandaloneLabel()||(b.params=b.params||{},y=H5P.newRunnable(b,e.contentId,void 0,void 0,{parent:e}),b.userDatas&&G(y)&&(n.score=y.getScore(),n.maxScore=y.getMaxScore()),y.on&&(y.on("xAPI",function(t){var o=t.getVerifiedStatementValue(["context","contextActivities","parent"])||[],i=t.getContentXAPIId(e),r="completed"===t.getVerb()||"answered"===t.getVerb();o.some(function(t){return t.id===i})&&r&&t.getMaxScore()&&null!==t.getScore()&&(n.score=t.getScore(),n.maxScore=t.getMaxScore(),W()),n.trigger(t)}),y.on("question-finished",function(){W()}),y.on("resize",function(){delete n.dialogWidth,e&&e.dnb&&e.dnb.dialog.removeStaticWidth()}),"H5P.IVHotspot"===S&&y.on("goto",F),"H5P.GoToQuestion"===S&&y.on("chosen",F)))};var G=function(t){return"undefined"!==(void 0===t?"undefined":i(t))&&"function"==typeof t.getScore&&"function"==typeof t.getMaxScore};n.setDnbElement=function(t){return k!==t&&(k=t,!0)},n.hasFullScore=function(){return n.score>=n.maxScore},n.getLibraryName=function(){return S},n.getTitle=function(){return w},n.getClass=function(){return g},n.getCopyrights=function(){if(!n.isStandaloneLabel()){var o=H5P.newRunnable(b,e.contentId);if(void 0!==o){var i=new H5P.ContentCopyrights;return i.addContent(H5P.getCopyrights(o,t,e.contentId)),i.setLabel(w+" "+H5P.InteractiveVideo.humanizeTime(t.duration.from)+" - "+H5P.InteractiveVideo.humanizeTime(t.duration.to)),i}}},n.getXAPIData=function(){if(y&&(y.getXAPIData instanceof Function||"function"==typeof y.getXAPIData))return y.getXAPIData()},n.getSubcontentId=function(){return b.subContentId},n.getElement=function(){return d},n.getFirstTabbableElement=function(){var t=a(d.get(0)).find("[tabindex]");return t&&t.length?t.get(0):d},n.focus=function(){d&&d.focus()},n.getClipboardData=function(){return H5P.DragNBar.clipboardify(H5PEditor.InteractiveVideo.clipboardKey,t,"action")},n.repositionToWrapper=function(e){if(d&&"H5P.IVHotspot"!==S){if(P&&(d.css({top:t.y+"%",left:t.x+"%"}),d.css(n.isButton()?{height:"",width:""}:z()),P=!1),d.position().top+d.height()>e.height()){var o=(e.height()-d.height())/e.height()*100;if(o<0){o=0;var i=e.height()/parseFloat(d.css("font-size"));d.css("height",i+"em")}d.css("top",o+"%"),P=!0}if(d.position().left+d.width()>e.width()){var r=(e.width()-d.width())/e.width()*100;if(r<0){r=0;var a=e.width()/parseFloat(d.css("font-size"));d.css("width",a+"em")}d.css("left",r+"%"),P=!0}}},n.resetTask=function(){void 0!==b.userDatas&&void 0!==b.userDatas.state&&delete b.userDatas.state,delete n.score,delete n.maxScore,n.reCreate()},n.reCreate()}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=o(0),a=H5P.jQuery,s=function(t){return void 0!==t&&"string"==typeof t&&t.length>0},l=function(t){return s(t)?a("<div>"+t+"</div>").text():void 0},c={TIME_CODE:"timecode",URL:"url"},u=function(t,e){return void 0!==t.goto&&t.goto.type===e},d=["H5P.Image","H5P.Nil","H5P.Table","H5P.Link","H5P.GoToQuestion","H5P.IVHotspot","H5P.Text"],h=function(t,e){return-1!==d.indexOf(t)||u(e,c.TIME_CODE)},p=["H5P.Text","H5P.Table"],f=function(t){return-1!==p.indexOf(t)};n.prototype=Object.create(H5P.EventDispatcher.prototype),n.prototype.constructor=n,e.default=n},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=function(t,e){return-1!==t.indexOf(e)},a=function(){function t(e){n(this,t),this.l10n=e;var o=document.createElement("div");o.classList.add("h5p-iv-interactions-announcer"),o.setAttribute("aria-live","polite"),o.setAttribute("aria-hidden","true"),this.interactionsAnnouncer=o;var i=document.createElement("div");i.classList.add("h5p-iv-hotkey-instructions"),i.textContent=e.navigationHotkeyInstructions,this.hotkeyInstructor=i,this.announcedInteractionIds=[]}return i(t,[{key:"getHotkeyInstructor",value:function(){return this.hotkeyInstructor}},{key:"getInteractionAnnouncer",value:function(){return this.interactionsAnnouncer}},{key:"announceInteractions",value:function(t){var e=this,o=t.filter(function(t){return t.isVisible()}),n=o.filter(function(t){return!r(e.announcedInteractionIds,t.getSubcontentId())});n.length>0&&(this.interactionsAnnouncer.textContent="",this.interactionsAnnouncer.textContent="\n        "+this.getAnnouncementMessage(n.length)+" \n        "+this.getTitleAnnouncement(n.length,n[0])+"\n        "+this.getPauseAnnouncement(n)),this.announcedInteractionIds=o.map(function(t){return t.getSubcontentId()})}},{key:"getAnnouncementMessage",value:function(t){return 0===t?"":1===t?this.l10n.singleInteractionAnnouncement:this.l10n.multipleInteractionsAnnouncement}},{key:"getTitleAnnouncement",value:function(t,e){return 1===t?e.getTitle():""}},{key:"getPauseAnnouncement",value:function(t){return t.some(function(t){return t.pause()})?". "+this.l10n.videoPausedAnnouncement:""}}]),t}();e.default=a}]);